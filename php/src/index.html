<!DOCTYPE html>
<html>
<head>
</head>
<body>
<script>
    const url = 'http://localhost:3000/user';
    function get(){
        const responseContainer = document.getElementById("responseContainer");
        const xhttp = new XMLHttpRequest();
        xhttp.open('GET', url, false);
        xhttp.send();
        const response = JSON.parse(xhttp.responseText);
        let tableHTML = '<table><thead><tr><th>ID</th><th>Email</th><th>Name</th><th>Inteler</th><th>Age</th></tr></thead><tbody>';
            
        response.forEach(item => {
            tableHTML += `
                <tr>
                    <td>${item.id}</td>
                    <td>${item.email}</td>
                    <td>${item.name}</td>
                    <td>${item.inteler}</td>
                    <td>${item.idade}</td>
                </tr>
            `;
        });
        tableHTML += '</tbody></table>';
        responseContainer.innerHTML = tableHTML;
    }

    function getByID(){
        const jsonInput = JSON.parse(document.getElementById("ByIdInput").value);
        const responseContainer = document.getElementById("responseContainerById");
        const xhttp = new XMLHttpRequest();
        var GetUrl = url + '/' + jsonInput
        xhttp.open('GET', GetUrl, false);
        xhttp.send();
        const response = JSON.parse(xhttp.responseText);
        let tableHTML = '<table><thead><tr><th>ID</th><th>Email</th><th>Name</th><th>Inteler</th><th>Age</th></tr></thead><tbody>';
            
        tableHTML += `
            <tr>
                <td>${response.id}</td>
                <td>${response.email}</td>
                <td>${response.name}</td>
                <td>${response.inteler}</td>
                <td>${response.idade}</td>
            </tr>
        `;

        tableHTML += '</tbody></table>';
        responseContainer.innerHTML = tableHTML;
    }

    function post(){
        const jsonInput = JSON.parse(document.getElementById("jsonInput").value);

        const responseContainer = document.getElementById("responseContainerPost");

        var xhttp = new XMLHttpRequest();
        xhttp.open("POST", url, false);
        xhttp.setRequestHeader("Content-Type", "application/json");
        xhttp.send(JSON.stringify(jsonInput));
        const response = JSON.parse(xhttp.responseText);
        let tableHTML = '<table><thead><tr><th>ID</th><th>Email</th><th>Name</th><th>Inteler</th><th>Age</th></tr></thead><tbody>';
            
        tableHTML += `
            <tr>
                <td>${response.id}</td>
                <td>${response.email}</td>
                <td>${response.name}</td>
                <td>${response.inteler}</td>
                <td>${response.idade}</td>
            </tr>
        `;

        tableHTML += '</tbody></table>';
        responseContainer.innerHTML = tableHTML;
    }

    function del(){
        const jsonInput = JSON.parse(document.getElementById("deleteInput").value);
        const responseContainer = document.getElementById("responseContainerDelete");

        var DelUrl = url + '/' + jsonInput

        var xhttp = new XMLHttpRequest();
        xhttp.open("DELETE", DelUrl, false);
        xhttp.send();
        const response = JSON.parse(xhttp.responseText);
        let tableHTML = '<table><thead><tr><th>ID</th><th>Email</th><th>Name</th><th>Inteler</th><th>Age</th></tr></thead><tbody>';
            
        tableHTML += `
            <tr>
                <td>${response.id}</td>
                <td>${response.email}</td>
                <td>${response.name}</td>
                <td>${response.inteler}</td>
                <td>${response.idade}</td>
            </tr>
        `;

        tableHTML += '</tbody></table>';
        responseContainer.innerHTML = tableHTML;
    }
</script>
<h1>GET</h1>
<button id="fetchButton" onclick="get()">Fetch Data</button>
<div id="responseContainer"></div>
<h1>GET BY ID</h1>
<textarea id="ByIdInput" rows="1" cols="3"></textarea>
<button id="getIdButton" onclick="getByID()">Fetch Data</button>
<div id="responseContainerById"></div>
<h1>POST</h1>
<textarea id="jsonInput" rows="5" cols="40"></textarea>
<button id="sendButton" onclick="post()">Send JSON</button>
<div id="responseContainerPost"></div>
<h1>DELETE</h1>
<textarea id="deleteInput" rows="1" cols="3"></textarea>
<button id="delButton" onclick="del()">delete</button>
<div id="responseContainerDelete"></div>
</body>
</html>
